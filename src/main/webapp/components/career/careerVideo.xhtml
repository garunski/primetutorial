<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
>
  <ui:composition>
    <h:panelGroup id="video" rendered="#{careerView.occupation.hasVideoFlag}">
      <div class="video-card mb-4">
        <!-- Left side: Video -->
        <div class="video-container">
          <iframe
            src="#{careerView.occupation.videoUrl}"
            title="#{careerView.occupation.title} Career Video"
            allowfullscreen="true"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            style="width: 600px; height: 300px; border: none;"
          >
          </iframe>
        </div>
        
        <!-- Right side: Content -->
        <div class="content-container">
          <!-- Interests with tooltips -->
          <h:panelGroup rendered="#{careerView.occupation.hasInterestsFlag}" styleClass="info-section">
            <h3 class="info-header">Interests</h3>
            <div class="info-pills">
              <ui:repeat value="#{careerView.occupation.interests}" var="interest" varStatus="status">
                <h:panelGroup rendered="#{status.index lt 4}">
                  <div class="info-pill interest-pill" data-bs-toggle="tooltip" data-bs-placement="top" title="#{interest.description}">
                    #{interest.name}
                  </div>
                </h:panelGroup>
              </ui:repeat>
            </div>
          </h:panelGroup>
          
          <!-- Work Values with tooltips -->
          <h:panelGroup rendered="#{careerView.occupation.hasWorkValuesFlag}" styleClass="info-section">
            <h3 class="info-header">Work Values</h3>
            <div class="info-pills">
              <ui:repeat value="#{careerView.occupation.workValues}" var="workValue" varStatus="status">
                <h:panelGroup rendered="#{status.index lt 4}">
                  <div class="info-pill value-pill" data-bs-toggle="tooltip" data-bs-placement="top" title="#{workValue.description}">
                    #{workValue.name}
                  </div>
                </h:panelGroup>
              </ui:repeat>
            </div>
          </h:panelGroup>
        </div>
      </div>
      
      <style>
        .video-card {
          display: flex;
          background: white;
          border-radius: 8px;
          box-shadow: 0 4px 20px rgba(0,0,0,0.08);
          overflow: hidden;
        }
        
        .video-container {
          flex: 0 0 600px;
          background: #000;
        }
        
        .content-container {
          flex: 1;
          padding: 24px;
          display: flex;
          flex-direction: column;
          max-width: 300px;
          justify-content: center;
        }
        
        .info-section {
          margin-bottom: 20px;
        }
        
        .info-section:last-child {
          margin-bottom: 0;
        }
        
        .info-header {
          font-size: 1rem;
          font-weight: 600;
          margin: 0 0 12px 0;
          color: #2c3e50;
        }
        
        .info-pills {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
        }
        
        .info-pill {
          padding: 6px 12px;
          border-radius: 50px;
          font-size: 0.85rem;
          cursor: help;
          transition: background-color 0.2s;
        }
        
        .interest-pill {
          background: #e9f7fe;
          color: #3498db;
        }
        
        .interest-pill:hover {
          background: #d0ebf6;
        }
        
        .value-pill {
          background: #fef5e9;
          color: #e67e22;
        }
        
        .value-pill:hover {
          background: #fdecd0;
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
          .video-card {
            flex-direction: column;
          }
          
          .video-container {
            flex: auto;
            width: 100%;
          }
          
          .content-container {
            padding: 16px;
            max-width: none;
          }
        }
      </style>
      
      <!-- Initialize tooltips -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
          var tooltipList = tooltipTriggerList.map(function(tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
          });
        });
      </script>
    </h:panelGroup>
  </ui:composition>
</html>
